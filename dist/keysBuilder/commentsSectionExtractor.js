"use strict";var __rest=this&&this.__rest||function(e,r){var t={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(t[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)r.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(t[s[o]]=e[s[o]])}return t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractCommentsValues=void 0;const config_1=require("../config"),regexs_1=require("../regexs"),addKey_1=require("./addKey"),resolveAliasAndKey_1=require("./resolveAliasAndKey"),stringToKeys=e=>r=>r.replace(e,"$1").split(",").map(e=>e.replace(/\*|\n/g,"").trim()).filter(e=>e.length>0),toOneDimArray=(e,r)=>(e.push(...r),e);function extractCommentsValues(e){var{content:r,regex:t,read:s=""}=e,o=__rest(e,["content","regex","read"]);const n=config_1.getConfig().marker,a=t();let c=a.exec(r);for(;c;){const e=regexs_1.regexs.markerValues(n),t=c[0].match(e);t&&t.map(stringToKeys(e)).reduce(toOneDimArray,[]).forEach(e=>{const r=s?`${s}.${e}`:e;let[t,n]=resolveAliasAndKey_1.resolveAliasAndKey(r,o.scopes);n||(t=r),addKey_1.addKey(Object.assign(Object.assign({},o),{keyWithoutScope:t,scopeAlias:n}))}),c=a.exec(r)}}exports.extractCommentsValues=extractCommentsValues;