"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.buildTranslationFiles=void 0;const config_1=require("./config"),countKeys_1=require("./helpers/countKeys"),logger_1=require("./helpers/logger"),resolveConfig_1=require("./helpers/resolveConfig"),buildKeys_1=require("./keysBuilder/buildKeys"),createTranslationFiles_1=require("./keysBuilder/createTranslationFiles"),messages_1=require("./messages");function buildTranslationFiles(e){const s=logger_1.getLogger(),r=resolveConfig_1.resolveConfig(e);config_1.setConfig(r),s.log("[4m%s[0m",`\n${messages_1.messages.startBuild(r.langs.length)} 👷🏗\n`),s.startSpinner(`${messages_1.messages.extract} 🗝`);const i=buildKeys_1.buildKeys(r),{scopeToKeys:o,fileCount:l}=i;s.success(`${messages_1.messages.extract} 🗝`);let t=0;for(const[e,s]of Object.entries(o))t+=countKeys_1.countKeys(s);s.log("[34m%s[0m","ℹ",messages_1.messages.keysFound(t,l)),createTranslationFiles_1.createTranslationFiles({scopeToKeys:o,scopes:r.scopes,langs:r.langs,outputPath:r.output,replace:r.replace,deleteMissingKeys:r.deleteMissingKeys})}exports.buildTranslationFiles=buildTranslationFiles;